[toc]

## 安卓基础

### 1. 安全功能

- Android 操作系统是一种多用户 Linux 系统，其中的 **每个应用都是一个不同的用户** ；
- 默认情况下，系统会为每个应用分配一个唯一的 Linux 用户 ID（该 ID 仅由系统使用，应用并不知晓）。系统会为应用中的所有文件设置权限，使得只有分配给该应用的用户 ID 才能访问这些文件；
- 每个进程都拥有自己的虚拟机 。
- 默认情况下，每个应用都在其自己的 Linux 进程内运行。



### 2. 应用组件

四大组件：

- Activity：是与用户交互的入口点。详情见 <a href="Activity.md">Activity</a>；
- Service：用于因各种原因使应用在后台保持运行状态，不提供界面，例如后台音乐播放。详情见 <a href="Service.md">Service</a>；
- BroadcastReceiver：允许应用响应系统范围内的广播通知，例如电量不足提醒。详情见 <a href="BroadcastReceiver.md">BroadcastReceiver</a>；
- ContentProvider：管理一组共享的应用数据，其他应用可以查询或修改数据，例如读写联系人。详情见 <a href="ContentProvider.md">ContentProvider</a>；

安卓系统的一大特点是 **任何应用可以启动其他应用的组件** 。由于每个应用运行在单独的进程中，应用无法直接启动其他应用中的组件，但 Android 系统可以。启动其他应用中的组件，需要向系统传递一条消息，说明启动特定组件的 *Intent*。



### 3. 清单文件

`AndroidManifest.xml` 的作用：

- 声明组件：如果未在清单文件中声明源代码中包含的 Activity、服务和内容提供程序，则这些组件对系统不可见；
- 确定应用需要的任何用户权限；
- 声明应用所需的最低 API 级别；
- 声明应用使用或需要的硬件和软件功能，如相机、蓝牙服务或多点触摸屏幕；
- 声明应用需要链接的 API 库。



### 4. 数据存储

- 内部存储：随应用卸载被删除，包括 shared_prefs、databases、files、cache
  - SharedPreferences：安卓中的轻量存储，以 K-V 形式存储在 xml 文件中，存放在 /data/data/applicationid/shared_prefs 中
- 外部存储
  - 公有目录：比如 Pictures 等
  - 私有目录：随应用卸载被删除，例如存储在外部存储上的 cache、files



